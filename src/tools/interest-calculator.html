<!-- Tool: Interest Calculator | Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙÙˆØ§Ø¦Ø¯ -->
<div class="tool-card">
  <div class="tool-header">
    <div class="tool-icon">ğŸ’°</div>
    <div>
      <h1 class="tool-title">{{tool.name}}</h1>
      <p class="tool-description">{{tool.description}}</p>
    </div>
  </div>
  
  <!-- Simple Interest Section -->
  <div class="interest-section">
    <h3 class="section-title">ğŸ“Š {{tool.simpleInterest}}</h3>
    <div class="calc-row-inline">
      <span class="calc-label">{{tool.principal}}</span>
      <input type="number" class="calc-input-sm" id="simple-principal" placeholder="10000" oninput="calcSimple()">
      <span class="calc-label">Ã— {{tool.rate}}</span>
      <input type="number" class="calc-input-sm" id="simple-rate" placeholder="5" oninput="calcSimple()">
      <span class="calc-label">% Ã— {{tool.time}}</span>
      <input type="number" class="calc-input-sm" id="simple-time" placeholder="3" oninput="calcSimple()">
    </div>
    <div class="results-row">
      <div class="result-box">
        <span class="result-label">{{tool.totalInterest}}</span>
        <span class="calc-result" id="simple-interest">â€”</span>
        <div class="result-controls">
          <button class="ctrl-btn" onclick="adjustPrecision('simple-interest', -1)">âˆ’</button>
          <button class="ctrl-btn" onclick="adjustPrecision('simple-interest', 1)">+</button>
          <button class="ctrl-btn" onclick="copyResult('simple-interest')">ğŸ“‹</button>
        </div>
      </div>
      <div class="result-box">
        <span class="result-label">{{tool.totalAmount}}</span>
        <span class="calc-result increase" id="simple-total">â€”</span>
        <div class="result-controls">
          <button class="ctrl-btn" onclick="adjustPrecision('simple-total', -1)">âˆ’</button>
          <button class="ctrl-btn" onclick="adjustPrecision('simple-total', 1)">+</button>
          <button class="ctrl-btn" onclick="copyResult('simple-total')">ğŸ“‹</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Compound Interest Section -->
  <div class="interest-section">
    <h3 class="section-title">ğŸ“ˆ {{tool.compoundInterest}}</h3>
    <div class="calc-row-inline">
      <span class="calc-label">{{tool.principal}}</span>
      <input type="number" class="calc-input-sm" id="compound-principal" placeholder="10000" oninput="calcCompound()">
      <span class="calc-label">Ã— {{tool.rate}}</span>
      <input type="number" class="calc-input-sm" id="compound-rate" placeholder="5" oninput="calcCompound()">
      <span class="calc-label">% Ã— {{tool.time}}</span>
      <input type="number" class="calc-input-sm" id="compound-time" placeholder="3" oninput="calcCompound()">
    </div>
    <div class="calc-row-inline">
      <span class="calc-label">{{tool.compound}}</span>
      <select class="calc-select" id="compound-frequency" onchange="calcCompound()">
        <option value="1">{{tool.yearly}}</option>
        <option value="2">{{tool.halfYearly}}</option>
        <option value="4">{{tool.quarterly}}</option>
        <option value="12" selected>{{tool.monthly}}</option>
        <option value="365">{{tool.daily}}</option>
      </select>
    </div>
    <div class="results-row">
      <div class="result-box">
        <span class="result-label">{{tool.totalInterest}}</span>
        <span class="calc-result" id="compound-interest">â€”</span>
        <div class="result-controls">
          <button class="ctrl-btn" onclick="adjustPrecision('compound-interest', -1)">âˆ’</button>
          <button class="ctrl-btn" onclick="adjustPrecision('compound-interest', 1)">+</button>
          <button class="ctrl-btn" onclick="copyResult('compound-interest')">ğŸ“‹</button>
        </div>
      </div>
      <div class="result-box">
        <span class="result-label">{{tool.totalAmount}}</span>
        <span class="calc-result increase" id="compound-total">â€”</span>
        <div class="result-controls">
          <button class="ctrl-btn" onclick="adjustPrecision('compound-total', -1)">âˆ’</button>
          <button class="ctrl-btn" onclick="adjustPrecision('compound-total', 1)">+</button>
          <button class="ctrl-btn" onclick="copyResult('compound-total')">ğŸ“‹</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Comparison -->
  <div class="comparison-box" id="comparison" style="display: none;">
    <h4>ğŸ“Š Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©</h4>
    <div class="comparison-content">
      <span>Ø§Ù„ÙØ±Ù‚: Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© Ø£ÙƒØ«Ø± Ø¨Ù€ </span>
      <span class="comparison-diff" id="diff-amount">â€”</span>
    </div>
  </div>
</div>

<!-- How to Use -->
<div class="how-to-use">
  <h3>ğŸ“– {{ui.howToUse}}</h3>
  <p>{{tool.howToUseText}}</p>
</div>

<style>
.interest-section {
  background: var(--bg-tertiary);
  border-radius: var(--border-radius-lg);
  padding: 24px;
  margin-bottom: 20px;
}

.section-title {
  margin: 0 0 20px 0;
  font-size: 1.2rem;
  color: var(--text-primary);
}

.calc-row-inline {
  display: flex;
  align-items: baseline;
  gap: 8px;
  flex-wrap: wrap;
  padding: 16px 0;
  font-size: 1.15rem;
  line-height: 2.2;
}

.calc-label {
  color: var(--text-primary);
}

.calc-input-sm {
  width: 100px;
  padding: 4px 8px;
  background: transparent;
  border: none;
  border-bottom: 2px solid var(--accent-primary);
  border-radius: 0;
  color: var(--accent-primary);
  font-size: 1.15rem;
  font-weight: 600;
  font-family: inherit;
  text-align: center;
  transition: all var(--transition-fast);
}

.calc-input-sm:focus {
  outline: none;
  border-bottom-color: var(--accent-secondary);
  background: rgba(99, 102, 241, 0.05);
}

.calc-input-sm::placeholder {
  color: var(--text-muted);
  font-weight: 400;
}

.calc-select {
  padding: 8px 16px;
  background: var(--bg-secondary);
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius);
  color: var(--text-primary);
  font-size: 1rem;
  font-family: inherit;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.calc-select:focus {
  outline: none;
  border-color: var(--accent-primary);
}

.results-row {
  display: flex;
  gap: 20px;
  margin-top: 20px;
  flex-wrap: wrap;
}

.result-box {
  flex: 1;
  min-width: 200px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
}

.result-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
}

.calc-result {
  min-width: 60px;
  padding: 8px 16px;
  background: var(--accent-gradient);
  border-radius: var(--border-radius);
  color: white;
  font-size: 1.3rem;
  font-weight: 700;
  text-align: center;
}

.calc-result.increase {
  background: linear-gradient(135deg, #22c55e, #16a34a);
}

.result-controls {
  display: flex;
  gap: 4px;
  justify-content: center;
}

.ctrl-btn {
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 6px;
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  font-size: 1rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}

.ctrl-btn:hover {
  background: var(--accent-primary);
  color: white;
}

.comparison-box {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
  border: 2px solid var(--accent-primary);
  border-radius: var(--border-radius-lg);
  padding: 20px;
  text-align: center;
}

.comparison-box h4 {
  margin: 0 0 12px 0;
  color: var(--accent-primary);
}

.comparison-diff {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--accent-primary);
}

@media (max-width: 768px) {
  .calc-input-sm {
    width: 80px;
    font-size: 1rem;
  }
  
  .result-box {
    min-width: 150px;
  }
  
  .calc-result {
    font-size: 1.1rem;
  }
}
</style>

<script>
// Store precision for each result
const interestData = {
  'simple-interest': { raw: null, precision: 2 },
  'simple-total': { raw: null, precision: 2 },
  'compound-interest': { raw: null, precision: 2 },
  'compound-total': { raw: null, precision: 2 }
};

function formatNumber(num, precision) {
  if (num === null || isNaN(num)) return 'â€”';
  return num.toFixed(precision);
}

function updateResult(id) {
  const data = interestData[id];
  const el = document.getElementById(id);
  el.textContent = formatNumber(data.raw, data.precision);
}

function adjustPrecision(id, delta) {
  const data = interestData[id];
  if (data.raw === null) return;
  data.precision = Math.max(0, Math.min(10, data.precision + delta));
  updateResult(id);
}

function copyResult(id) {
  const data = interestData[id];
  if (data.raw === null) return;
  navigator.clipboard.writeText(data.raw.toFixed(data.precision)).then(() => {
    App.showToast(App.state.lang === 'ar' ? 'ØªÙ… Ø§Ù„Ù†Ø³Ø®!' : 'Copied!');
  });
}

// Simple Interest: I = P Ã— r Ã— t
function calcSimple() {
  const P = parseFloat(document.getElementById('simple-principal').value);
  const r = parseFloat(document.getElementById('simple-rate').value) / 100;
  const t = parseFloat(document.getElementById('simple-time').value);
  
  if (!isNaN(P) && !isNaN(r) && !isNaN(t)) {
    const interest = P * r * t;
    const total = P + interest;
    
    interestData['simple-interest'].raw = interest;
    interestData['simple-total'].raw = total;
  } else {
    interestData['simple-interest'].raw = null;
    interestData['simple-total'].raw = null;
  }
  
  updateResult('simple-interest');
  updateResult('simple-total');
  updateComparison();
}

// Compound Interest: A = P Ã— (1 + r/n)^(nÃ—t)
function calcCompound() {
  const P = parseFloat(document.getElementById('compound-principal').value);
  const r = parseFloat(document.getElementById('compound-rate').value) / 100;
  const t = parseFloat(document.getElementById('compound-time').value);
  const n = parseFloat(document.getElementById('compound-frequency').value);
  
  if (!isNaN(P) && !isNaN(r) && !isNaN(t) && !isNaN(n)) {
    const total = P * Math.pow(1 + r/n, n * t);
    const interest = total - P;
    
    interestData['compound-interest'].raw = interest;
    interestData['compound-total'].raw = total;
  } else {
    interestData['compound-interest'].raw = null;
    interestData['compound-total'].raw = null;
  }
  
  updateResult('compound-interest');
  updateResult('compound-total');
  updateComparison();
}

function updateComparison() {
  const simpleInterest = interestData['simple-interest'].raw;
  const compoundInterest = interestData['compound-interest'].raw;
  const comparisonEl = document.getElementById('comparison');
  const diffEl = document.getElementById('diff-amount');
  
  if (simpleInterest !== null && compoundInterest !== null) {
    const diff = compoundInterest - simpleInterest;
    diffEl.textContent = formatNumber(Math.abs(diff), 2);
    comparisonEl.style.display = 'block';
  } else {
    comparisonEl.style.display = 'none';
  }
}
</script>
